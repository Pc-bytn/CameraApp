# Project Requirements Document: CameraApp

The following table outlines the detailed functional requirements of the CameraApp Cordova application.

| Requirement ID | Description                 | User Story                                                                                       | Expected Behavior/Outcome                                                                                                     |
|---------------|-----------------------------|--------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| FR001         | Basic Cordova App Setup     | As a user, I want a Cordova app that launches to a home page and can access the camera for live streaming. | The system should provide a Cordova app that launches to a home page with camera access and streaming functionality.         |
| FR002         | Camera Streaming Preview    | As a user, I want to see a live camera preview (stream) on the home page using my device's camera. | The app should display a live camera feed as a preview on the home page using WebRTC (not just a static preview).           |
| FR003         | Stream Control Button       | As a user, I want a button at the top of the camera preview to start or stop streaming.           | The app should display a button at the top of the camera preview. When pressed, it should start or stop the camera stream.   |
| FR004         | Permissions Handling        | As a user, I want the app to request and handle camera and audio permissions as needed.            | The app should request camera and audio permissions on startup and before streaming, and handle permission errors gracefully. |
| FR005         | Error Feedback              | As a user, I want to be notified of errors (e.g., permission denied, no camera found) via alerts. | The app should use alert dialogs to inform the user of errors or permission issues.                                           |
| FR006         | Camera Preview Display      | As a user, I want to see the camera preview displayed on my screen.                               | The app should show a real-time camera preview in a designated area of the screen before starting the stream.                |
| FR007         | Session Link Sharing        | As a user, I want to easily share the streaming session with others via a direct link.            | A "Send" button should appear next to the capture button. When pressed, it generates and shares using the system share dialog (Don't use seperate new plugin) a link containing the session ID that recipients can use to directly access the stream through viewer.html in their browser. |
| FR008         | Viewer Live Clipping       | As a viewer, I want to capture and save specific segments of the live video stream as clips.     | The viewer interface (viewer.html) should provide "Start Clip" and "End Clip" buttons (or a similar mechanism). Pressing "Start Clip" begins capturing the stream. Pressing "End Clip" stops capturing and saves the segment between the start and end points as a downloadable video file on the viewer's device. Only the selected segment is recorded and saved. |
| FR009         | Viewer Screenshot Capture  | As a viewer, I want to capture still images from the video stream at any time.                  | The viewer interface should provide a "Screenshot" button that, when pressed, captures the current frame of the video stream and allows the viewer to download it as an image file. Visual feedback should confirm successful capture.                                        |
| FR010         | Viewer Media Controls      | As a viewer, I want easy access to clipping controls, captured media, and options to manage them. | The viewer interface should have an intuitive control panel for live clipping and screenshots. Each captured item should display options to rename and upload it. Clear status indicators should be present, and controls should not interfere with stream viewing. |
| FR011         | Server-Side Media Storage  | As a viewer, I want captured clips and screenshots to be uploaded and stored on the server in a session-specific folder. | The system should provide a backend mechanism (e.g., a PHP script) to handle file uploads. Captured media (clips as .webm, screenshots as .png) should be stored on the server in a directory structure like `/recordings/[sessionId]/[filename]`, where `[sessionId]` is the active session ID and `[filename]` is either the original timestamped name or a user-renamed one. The backend should create the necessary directories if they don't exist. |
| FR012         | Browser-Based Stream Initiation | As a host user, I want to initiate a stream session from my browser and invite others to stream their video to me using new stream page. | The system should provide a web interface to create a new session, generate a unique session ID, and share it as the link with the session ID. When another user joins it, they should be able to stream their camera while the host views and has access to all media control features (clipping, screenshots, etc.). The host should only have the streaming capability. |
| FR013         | Camera Switching             | As a user, I want to be able to switch between the front and back cameras in both the Cordova app and the stream.html web page. | The app and stream.html page should provide a control (e.g., a button) that allows the user to toggle between the device's front and back cameras during live streaming. The switch should be seamless, and the video preview should update accordingly. If a camera is unavailable, an alert should notify the user. |
